==Introduction==
The MAP File Format contains the information for a map used in the game.  A map consists of a grid that the player walks on, plus all the associated walls, scenery, critters, objects etc.
A MAP file may contain up to 3 separate levels, typically used for representing different elevations.

Each level contains a 200 by 200 hex grid, for a total of 40000 possible positions on the grid. The format for locations on the grid is: 00 00 XX YY, where XX is the horizontal coordinate [0 .. 199], and YY is the vertical coordinate [0 .. 199].

The MAP file format consists of 5 parts:

#Header of the MAP file
#Global and Local Variables
#Tiles
#MAP Scripts
#MAP Objects

==PID==
The PID is a fundamental type used in the MAP file.  It is an identifier for describing objects.  It consists of a 4 byte integer of the form <TT>0xaa00bbbb</TT>.  The byte <TT>aa</TT> is the type of the object, while the 2 bytes <TT>bbbb</TT> are the id of the object. The id is typically an index into a LST file.
Valid types include:

*00: items
*01: critters
*02: scenery
*03: walls
*04: tiles
*05: misc
*06: intrface
*07: inven
*08: heads
*09: background
<HR WIDTH="80%" ALIGN="Left">
<STRONG>Note: </STRONG>for PIDs that refer to critter [[FRM File Format|FRM files]], the PID format is more complex. This format will be documented later.
<HR WIDTH="80%" ALIGN="Left">

==Header of the MAP file==
<table border="1">
<tr>
<td align='center' width="50">
<strong>Offset</strong>
</td>
<td align='center' width="40">
<strong>Size</strong>
</td>
<td align='center' width="80">
<strong>Data Type</strong>
</td>
<td align='center'>
<strong>Description</strong>
</td>
</tr>

<tr>
<td align='center'>
0x0000
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned = 19 or 20
</td>
<td align='left'>
Map version.

''Fallout 1'' uses map version 19, while ''Fallout 2'' uses 20.
</td>
</tr>
<tr>
<td align='center'>
0x0004
</td>
<td align='center'>
16
</td>
<td align='center'>
string
</td>
<td align='left'>
Map filename.
</td>

</tr>
<tr>
<td align='center'>
0x0014
</td>
<td align='center'>
4
</td>
<td align='center'>
signed = [0..39999]
</td>
<td align='left'>
Default player position.
The default hex grid that the player will start in when the map is entered, if not overridden.
</td>
</tr>

<tr>
<td align='center'>
0x0018
</td>
<td align='center'>
4
</td>
<td align='center'>
signed = [0..2]
</td>
<td align='left'>
Default map elevation.
The default map elevation for the player to start in when the map is entered, if not overridden.
</td>
</tr>
<tr>

<td align='center'>
0x001C
</td>
<td align='center'>
4
</td>
<td align='center'>
signed = [0..5]
</td>
<td align='left'>
Default player orientation.
The default orientation the player is facing when the map is entered.
</td>
</tr>
<tr>
<td align='center'>

0x0020
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
<tt>NUM-LOCAL-VARS</tt> : Number of local variables stored in map.
</td>
</tr>
<tr>
<td align='center'>
0x0024

</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Script id for this map.
Value of -1 means no map. Text string is found in MSG file <tt>scrname.msg</tt> at index [id + 101].

</td>
</tr>
<tr>
<td align='center'>
0x0028
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Elevation flags.

*If (flag &amp; 0x1) == 0 then ?? unknown.

*If (flag &amp; 0x2) == 0 then the map has an elevation at level 0.
*If (flag &amp; 0x4) == 0 then the map has an elevation at level 1.
*If (flag &amp; 0x8) == 0 then the map has an elevation at level 2.
</td>
</tr>
<tr>
<td align='center'>
0x002C
</td>
<td align='center'>

4
</td>
<td align='center'>
signed = 1
</td>
<td align='left'>
Map darkness (according to mapper2, not sure if used).
</td>
</tr>
<tr>
<td align='center'>
0x0030
</td>
<td align='center'>
4
</td>
<td align='center'>

signed
</td>
<td align='left'>
<tt>NUM-GLOBAL-VARS</tt> : Number of global variables stored in map.
</td>
</tr>
<tr>
<td align='center'>
0x0034
</td>
<td align='center'>
4
</td>
<td align='center'>
signed

</td>
<td align='left'>
Map Id.

*''Fallout 1'': Map filename found in <tt>map.msg</tt>
*''Fallout 2'': Map details found in <tt>data/maps.txt</tt> in section [Map id]
</td>
</tr>
<tr>
<td align='center'>
0x0038

</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Time since the epoch.
Number of time ticks since the epoch.  A time tick is equivalent to 0.1 seconds in game time.  The epoch for ''Fallout 1'' is &quot;5 December 2161 00:00am&quot;, and for ''Fallout 2'' &quot;25 July 2241 00:00am&quot;.
</td>
</tr>

<tr>
<td align='center'>
0x003C
</td>
<td align='center'>
4 * 44
</td>
<td align='center'>
signed = 0
</td>
<td align='left'>
Unknown.
</td>
</tr>
</table>

==Global and Local Variables==
The global and local variables used by the map scripts are stored here in arrays.
<table border="1">
<tr>
<td align='center'>
<strong>Offset</strong>
</td>
<td align='center'>
<strong>Size</strong>
</td>
<td align='center'>
<strong>Data Type</strong>
</td>
<td align='center'>
<strong>Description</strong>
</td>
</tr>

<tr>
<td>
0x00EC
</td>
<td align='center'>
4 * NUM-GLOBAL-VARS
</td>
<td align='center'>
signed
</td>
<td align='left'>
Array of global variables.
</td>
</tr>

<tr>
<td align='center'>
0x00EC + (4 * NUM-GLOBAL-VARS)
</td>
<td align='center'>
4 * NUM-LOCAL-VARS
</td>
<td align='center'>
signed
</td>
<td align='left'>
Array of local variables.
</td>
</tr>
</table>

==Tiles==
Each level of the map consists of tile data for both the roof and floor. These tiles are on an isometric grid, which is independent of the hexagonal grid used for critters, scenery, objects etc.  The grid size is 100 by 100, which gives a total of 20000 tiles for each level (including both floor and roof).
For each elevation that exists in the MAP file, there is the following tile information.
<table border="1">
<tr>
<td align='center' width="110">
<strong>Offset</strong>
</td>
<td align='center' width="70">
<strong>Size</strong>
</td>
<td align='center' width="65">
<strong>Data Type</strong>
</td>
<td align='center'>
<strong>Description</strong>
</td>
</tr>

<tr>
<td align='center'>
0x0000 + (offset)
</td>
<td align='center'>
2
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Roof tile id for tile position 0.
The id is the filename of the FRM file containing the tile image data. The filename can be found in the LST file <TT>art/tiles/tiles.lst</TT> using this id. An id of 1 means no tile.
</td>
</tr>

<tr>
<td align='center'>
0x0002 + (offset)
</td>
<td align='center'>
2
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Floor tile id for tile position 0.
Same comments apply as above.
</td>
</tr>

<tr>
<td align='center'>
0x0004 + (offset)
</td>
<td align='center'>
2
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Roof tile id for tile position 1.
</td>
</tr>

<tr>
<td align='center'>
0x0006 + (offset)
</td>
<td align='center'>
2
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Floor tile id for tile position 1.
</td>
</tr>

<tr>
<td align='center'>
0x0008 + (offset)
</td>
<td align='center'>
(2 + 2) * (20000 - 2)
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Roof/Floor tiles id for tile positions [2-9999].
</td>
</tr>
</table>

==MAP Scripts==
This section of the file stores information about the scripts connected to objects in this map. This section is not really understood very well.

There are 5 types of scripts found in the MAP file. The type of the script is found in the PID.

Scripts in this section are always grouped in multiples of 16, rounding up. After each group of 16 scripts is a check integer.

Here is some sample C code used to skip over the script section.
<pre>
/* read in each sequence of scripts */
for (i = 0; i &lt; 5; i++) {

   /* number of scripts used in this sequence */
   count = read_int32_big_endian(stream);
   if (count &gt; 0) {

      /* loop counter must be modulo 16 (rounded up) */
      loop = MODULO_16(count);

      check = 0;

      /* read in all the scripts of this sequence */
      for (j = 0; j &lt; loop; j++) {
         read_script(stream);

         /* after every 16 scripts is the check block */
         if ((j % 16) == 15) {
            v = read_int32_big_endian(stream);
            check += v;

            /* don't know what this is for, so ignore it for now */
            v = read_int32_big_endian(stream);
         }
      }
      if (check != count) {
         set_error_message(&quot;error reading scripts: check is incorrect&quot;);
         okay = FALSE;
         break;
      }
   }
}

return okay;
</pre>
The <tt>read_script()</tt> function reads in a script of the following format.

<table border="1">
<tr>
<td align='center'>
<strong>Offset</strong>
</td>
<td align='center'>
<strong>Size</strong>
</td>
<td align='center'>
<strong>Data Type</strong>
</td>
<td align='center'>
<strong>Description</strong>
</td>
</tr>

<tr>
<td align='center'>
0x0000 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
PID
</td>
<td align='left'>
<tt>PID</tt> : PID of the script.
</td>
</tr>

<tr>
<td align='center'>
0x0004 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed = -1
</td>
<td align='left'>
Next script. Unused.
</td>
</tr>

<tr>
<td align='center'>
0x0008 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align="left">
Timer script time, or

Spatial script hex. First two bytes are elevation:

0x0000 - 1

0x2000 - 2

0x4000 - 3

Only read this if PID has type 1 or 2 (spatial or timer)
</td>
</tr>

<tr>
<td align='center'>
0x000C + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Spatial script radius.

Only read this if PID has type 1 (spatial)
</td>
</tr>

<tr>
<td align='center'>
0x0010 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Script flags (0 in maps, value in saves).
</td>
</tr>

<tr>
<td align='center'>
0x0014 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Script id.

Script filename is found in LST file <tt>script.lst</tt> at index id.
</td>
</tr>

<tr>
<td align='center'>
0x0018 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Unknown 5.
</td>
</tr>

<tr>
<td align='center'>
0x001C + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Script oid.
</td>
</tr>

<tr>
<td align='center'>
0x0020 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed = -1
</td>
<td align='left'>
Local var offset (-1 in maps, value on saves).
</td>
</tr>

<tr>
<td align='center'>
0x0024 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Num local vars (0 in maps, value in saves).
</td>
</tr>

<tr>
<td align='center'>
0x0028 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Unknown 9.
</td>
</tr>

<tr>
<td align='center'>
0x002C + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Unknown 10.
</td>
</tr>

<tr>
<td align='center'>
0x0030 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Unknown 11.
</td>
</tr>

<tr>
<td align='center'>
0x0034 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed = -1
</td>
<td align='left'>
Unknown 12.
</td>
</tr>

<tr>
<td align='center'>
0x0038 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Unknown 13.
</td>
</tr>

<tr>
<td align='center'>
0x003C + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Unknown 14.
</td>
</tr>

<tr>
<td align='center'>
0x0040 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Unknown 15.
</td>
</tr>

<tr>
<td align='center'>
0x0044 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Unknown 16.
</td>
</tr>
</table>

==MAP Objects==
The objects contain the scenery, walls, items, containers, keys and critters that appear on the map. There is an array of objects for each elevation of the map.

*4 byte integer containing total number of objects on all levels
*for each of the three levels
**4 byte integer containing number of objects on this level
**array on map objects

<table border="1">
<tr>
<td align='center' width="125">
<strong>Offset</strong>
</td>
<td align='center'>
<strong>Size</strong>
</td>
<td align='center' width="100">
<strong>Data Type</strong>
</td>
<td align='center'>
<strong>Description</strong>
</td>
</tr>

<tr>
<td align='center'>
0x0000 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Unknown 0.
I don't think this is part of the object, but some kind of separator.
</td>
</tr>

<tr>
<td align='center'>
0x0004 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
= [-1..39999]
</td>
<td align='left'>
Position of this object.
Hex grid id that the object resides in.  A value of -1 means that the object is not on the grid (typically it is in an inventory).
</td>
</tr>

<tr>
<td align='center'>
0x0008 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
X (Unknown 1).
</td>
</tr>

<tr>
<td align='center'>
0x000C + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Y (Unknown 2).
</td>
</tr>

<tr>
<td align='center'>
0x0010 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
SX (Unknown 3).
</td>
</tr>

<tr>
<td align='center'>
0x0014 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
SY (Unknown 4).
</td>
</tr>

<tr>
<td align='center'>
0x0018 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Frame number.
This is the frame index of the frame in the FRM file this is currently being displayed.
</td>
</tr>

<tr>
<td align='center'>
0x001C + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned = [0-5]
</td>
<td align='left'>
Orientation of this object.
</td>
</tr>

<tr>
<td align='center'>
0x0020 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
PID
</td>
<td align='left'>
FRM PID of this object.
PID of the filename used to display this object on the hex grid.
</td>
</tr>

<tr>
<td align='center'>
0x0024 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align="left">
Unknown Flags.
Collection of flags about this object.

*If (flag &amp; 0x01000000) == 1 then this item is held in the right hand
*If (flag &amp; 0x02000000) == 1 then this item is held in the left hand
*If (flag &amp; 0x04000000) == 1 then this armour is worn
This is the same flags as in PRO files. They override values from prototype
</td>
</tr>

<tr>
<td align='center'>
0x0028 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned = [0..2]
</td>
<td align='left'>
Map elevation this object is on.
</td>
</tr>

<tr>
<td align='center'>
0x002C + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
PID
</td>
<td align='left'>
<TT>PROTO-PID">PROTO-PID</TT> : Prototype PID this object is based on.
</td>
</tr>

<tr>
<td align='center'>
0x0030 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Critter index number. (Only for in-battle .SAV ) -1 for normal objects
</td>
</tr>

<tr>
<td align='center'>
0x0034 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Light radius (in hexes)
</td>
</tr>

<tr>
<td align='center'>
0x0038 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Light intensity (0..65536, interpreted as 0-100%)
</td>
</tr>

<tr>
<td align='center'>
0x003C + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned = 0
</td>
<td align='left'>
Outline color. (Only for in-battle .SAV)

0x0 - no outline

0x1 - red

0x20 - yellow
</td>
</tr>

<tr>
<td align='center'>
0x0040 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
PID
</td>
<td align='left'>
PID of MAP Scripts.
</td>
</tr>

<tr>
<td align='center'>
0x0044 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Script id.

Script filename is found in LST file <TT>script.lst</TT> at index id. A value of -1 means no script.
</td>
</tr>

<tr>
<td align='center'>
0x0048 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Number of map objects in this object's inventory.
If this is non zero, then after reading this map object, the objects in the inventory must be read. The objects in the inventory are map objects as well, and they follow this object, being preceeded by a 4 byte integer being the count of this map object in the inventory.
</td>
</tr>

<tr>
<td align='center'>
0x004C + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Maximum number of slots in critter inventory.
</td>
</tr>

<tr>
<td align='center'>
0x0050 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Unknown 10.
</td>
</tr>

<tr>
<td align='center'>
0x0054 + (offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Unknown 11.
</td>
</tr>

</table>

===Extra fields for critters===
<table border="1">
<tr>
<td align='center'>
<strong>Offset</strong>
</td>
<td align='center'>
<strong>Size</strong>
</td>
<td align='center'>
<strong>Data Type</strong>
</td>
<td align='center'>
<strong>Description</strong>
</td>
</tr>

<tr>
<td align='center'>
0x0000 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Reaction to player (not sure).

Only valid for .SAV (not sure)
</td>
</tr>

<tr>
<td align='center'>
0x0004 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Current mp (?).

Only valid for .SAV
</td>
</tr>

<tr>
<td align='center'>
0x0008 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Combat results.

Only valid for .SAV
</td>
</tr>

<tr>
<td align='center'>
0x000C + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Damage last turn.

Only valid for .SAV
</td>
</tr>

<tr>
<td align='center'>
0x0010 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
AI packet number.

Packet number of critter AI, found in <TT>data/AI.txt</TT>.
</td>
</tr>

<tr>
<td align='center'>
0x0014 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Group id.
</td>
</tr>

<tr>
<td align='center'>
0x0018 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Who hit me.

Only valid for .SAV
</td>
</tr>

<tr>
<td align='center'>
0x001C + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Current Hit Points.
</td>
</tr>

<tr>
<td align='center'>
0x0020 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Current Rad.
</td>
</tr>

<tr>
<td align='center'>
0x0024 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Current Poison.
</td>
</tr>
</table>

===Extra fields for ammo===
<table border="1">
<tr>
<td align='center'>
<strong>Offset</strong>
</td>
<td align='center'>
<strong>Size</strong>
</td>
<td align='center'>
<strong>Data Type</strong>
</td>
<td align='center'>
<strong>Description</strong>
</td>
</tr>

<tr>
<td align='center'>
0x0000 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Amount of ammo in magazine.
Number of bullets or charges in this magazine.
</td>
</tr>

</table>

===Extra fields for keys===
<table border="1">
<tr>
<td align='center'>
<strong>Offset</strong>
</td>
<td align='center'>
<strong>Size</strong>
</td>
<td align='center'>
<strong>Data Type</strong>
</td>
<td align='center'>
<strong>Description</strong>
</td>
</tr>

<tr>
<td align='center'>
0x0000 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
KeyCode
</td>
</tr>
</table>

===Extra fields for misc items===
<table border="1">
<tr>
<td align='center'>
<strong>Offset</strong>
</td>
<td align='center'>
<strong>Size</strong>
</td>
<td align='center'>
<strong>Data Type</strong>
</td>
<td align='center'>
<strong>Description</strong>
</td>
</tr>

<tr>
<td align='center'>
0x0000 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Charges.
</td>
</tr>
</table>

===Extra fields for weapons===
<table border="1">
<tr>
<td align='center' width="150">
<strong>Offset</strong>
</td>
<td align='center'>
<strong>Size</strong>
</td>
<td align='center'>
<strong>Data Type</strong>
</td>
<td align='center'>
<strong>Description</strong>
</td>
</tr>

<tr>
<td align='center'>
0x0000 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Ammo count.
Amount of ammunition loaded in this weapon.
</td>
</tr>

<tr>
<td align='center'>
0x0004 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
signed
</td>
<td align='left'>
Id of ammo prototype.
Ammo prototype filename is found in LST file <TT>proto/items/items.lst</TT> at index id.
</td>
</tr>
</table>

===Extra fields for ladder bottom===
<table border="1">
<tr>
<td align='center'>
<strong>Offset</strong>
</td>
<td align='center'>
<strong>Size</strong>
</td>
<td align='center'>
<strong>Data Type</strong>
</td>
<td align='center'>
<strong>Description</strong>
</td>
</tr>

<tr>
<td align='center'>
0x0000 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
DestHex and DestElev.
</td>
</tr>

<tr>
<td align='center'>
0x0004 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Destination map num.

Only in MAP version 20.
</td>
</tr>
</table>

===Extra fields for ladder top===
<table border="1">
<tr>
<td align='center'>
<strong>Offset</strong>
</td>
<td align='center'>
<strong>Size</strong>
</td>
<td align='center'>
<strong>Data Type</strong>
</td>
<td align='center'>
<strong>Description</strong>
</td>
</tr>

<tr>
<td align='center'>
0x0000 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
DestHex and DestElev.
</td>
</tr>

<tr>
<td align='center'>
0x0004 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Destination map num.

Only in MAP version 20.
</td>
</tr>
</table>

===Extra fields for portals/doors===
<table border="1">
<tr>
<td align='center'>
<strong>Offset</strong>
</td>
<td align='center'>
<strong>Size</strong>
</td>
<td align='center'>
<strong>Data Type</strong>
</td>
<td align='center'>
<strong>Description</strong>
</td>
</tr>

<tr>
<td align='center'>
0x0000 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
WalkThrough.
</td>
</tr>
</table>

===Extra fields for stairs===
<table border="1">
<tr>
<td align='center'>
<strong>Offset</strong>
</td>
<td align='center'>
<strong>Size</strong>
</td>
<td align='center'>
<strong>Data Type</strong>
</td>
<td align='center'>
<strong>Description</strong>
</td>
</tr>

<tr>
<td align='center'>
0x0000 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align="left">
DestHex and DestElev.
</td>
</tr>

<tr>
<td align='center'>
0x0004 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
Destination map num.
</td>
</tr>
</table>

===Extra fields for elevators===
<table border="1">
<tr>
<td align='center'>
<strong>Offset</strong>
</td>
<td align='center'>
<strong>Size</strong>
</td>
<td align='center'>
<strong>Data Type</strong>
</td>
<td align='center'>
<strong>Description</strong>
</td>
</tr>

<tr>
<td align='center'>
0x0000 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
ElevType.
</td>
</tr>

<tr>
<td align='center'>
0x0004 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
ElevLevel.
</td>
</tr>
</table>

===Extra fields for exit grids===
<table border="1">
<tr>
<td align='center' width="150">
<strong>Offset</strong>
</td>
<td align='center'>
<strong>Size</strong>
</td>
<td align='center' width="130">
<strong>Data Type</strong>
</td>
<td align='center'>
<strong>Description</strong>
</td>
</tr>

<tr>
<td align='center'>
0x0000 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned
</td>
<td align='left'>
<TT>EXIT-MAP-ID">EXIT-MAP-ID</TT> : Map Id.
The id of the map that this exit grid leads to.

*Fallout 1: Map filename found in <TT>map.msg</TT>
*Fallout 2: Map details found in <TT>data/maps.txt</TT> in section [Map id]
</td>
</tr>

<tr>
<td align='center'>
0x0004 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned = [0..39999]
</td>
<td align='left'>
Player position.
Position on the hex grid that the player will start in when moving to map EXIT-MAP-ID.
</td>
</tr>

<tr>
<td align='center'>
0x0008 + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned = [0..2]
</td>
<td align='left'>
Map elevation.
Elevation of map EXIT-MAP-ID that this exit grid leads to.
</td>
</tr>

<tr>
<td align='center'>
0x000C + (0x58 + offset)
</td>
<td align='center'>
4
</td>
<td align='center'>
unsigned = [0..5]
</td>
<td align='left'>
Player orientation.
Orientation of the player when entering EXIT-MAP-ID from this exit grid.
</td>
</tr>
</table>

==Copyright==
(c) by TeamX, taken from their [http://www.teamx.ru/files/docs/map.rar website]
[[Category:Fallout and Fallout 2 file formats]]
